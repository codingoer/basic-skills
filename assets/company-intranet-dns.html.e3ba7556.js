import{d as n}from"./app.df89ce13.js";import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";const a={},e=n(`<h1 id="\u6A21\u62DF\u516C\u53F8\u5185\u7F51\u5F00\u53D1\u73AF\u5883" tabindex="-1"><a class="header-anchor" href="#\u6A21\u62DF\u516C\u53F8\u5185\u7F51\u5F00\u53D1\u73AF\u5883" aria-hidden="true">#</a> \u6A21\u62DF\u516C\u53F8\u5185\u7F51\u5F00\u53D1\u73AF\u5883</h1><h2 id="\u642D\u5EFAdns\u670D\u52A1\u5668" tabindex="-1"><a class="header-anchor" href="#\u642D\u5EFAdns\u670D\u52A1\u5668" aria-hidden="true">#</a> \u642D\u5EFADNS\u670D\u52A1\u5668</h2><p>\u4F7F\u7528<strong>172.16.203.130</strong>\u8FD9\u53F0\u673A\u5668</p><h3 id="\u5B89\u88C5bind\u8F6F\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5bind\u8F6F\u4EF6" aria-hidden="true">#</a> \u5B89\u88C5bind\u8F6F\u4EF6</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum -y <span class="token function">install</span> bind*
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://image.hualihai.cn/blog/7W8aeb.png" alt="7W8aeb"></p><p>\u542F\u52A8<strong>bind</strong>\u670D\u52A1</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start named.service
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u67E5\u770B\u7AEF\u53E3\u5224\u65AD\u670D\u52A1\u662F\u5426\u542F\u52A8\u6210\u529F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">netstat</span> -an <span class="token operator">|</span> <span class="token function">grep</span> :53
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://image.hualihai.cn/blog/68VpCa.png" alt="68VpCa"></p><h3 id="bind\u7684\u9ED8\u8BA4\u8DEF\u5F84\u8BBE\u5B9A\u4E0Echroot" tabindex="-1"><a class="header-anchor" href="#bind\u7684\u9ED8\u8BA4\u8DEF\u5F84\u8BBE\u5B9A\u4E0Echroot" aria-hidden="true">#</a> Bind\u7684\u9ED8\u8BA4\u8DEF\u5F84\u8BBE\u5B9A\u4E0E<strong>chroot</strong></h3><p>chroot\u4EE3\u8868\u7684\u662F <strong>change to root(\u6839\u76EE\u5F55)</strong> \u7684\u610F\u601D\uFF0Croot\u4EE3\u8868\u7684\u662F\u6839\u76EE\u5F55\u3002CentOS\u9ED8\u8BA4\u5C06bind\u9501\u5728<code>/var/named/chroot</code>\u76EE\u5F55\u4E2D.</p><p>\u7531\u4E8ECentOS\u5DF2\u7ECF\u900F\u8FC7\u542F\u52A8\u811A\u672C\u5E2E\u6211\u4EEC\u8FDB\u884C\u6863\u6848\u4E0E\u76EE\u5F55\u7684\u6302\u8F7D\u94FE\u63A5\uFF0C\u6240\u4EE5\u8BF7\u4F60\u76F4\u63A5\u4FEE\u6539<code>/etc/named.conf</code>\u5373\u53EF\uFF0C\u4E0D\u8981\u518D\u53BB<code>/var/named/chroot/etc/named.conf</code>\u4FEE\u6539.</p><p>BIND\u7684\u914D\u7F6E\u6587\u4EF6\u4E3A<code>/etc/named.conf</code></p><p><img src="https://image.hualihai.cn/blog/za2Gmd.png" alt="za2Gmd"></p><h3 id="\u7F16\u8F91-etc-named-conf\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91-etc-named-conf\u6587\u4EF6" aria-hidden="true">#</a> \u7F16\u8F91<code>/etc/named.conf</code>\u6587\u4EF6</h3><p>\u539F\u59CB\u6587\u4EF6\u5185\u5BB9</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>//
// named.conf
//
// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS
// server as a caching only nameserver (as a localhost DNS resolver only).
//
// See /usr/share/doc/bind<span class="token important">*/sample/</span> for example named configuration files.
//
// See the BIND Administrator&#39;s Reference Manual (ARM) for details about the
// configuration located in /usr/share/doc/bind<span class="token punctuation">-</span><span class="token punctuation">{</span>version<span class="token punctuation">}</span>/Bv9ARM.html

options <span class="token punctuation">{</span>
        listen<span class="token punctuation">-</span>on port 53 <span class="token punctuation">{</span> 127.0.0.1; <span class="token punctuation">}</span>;
        listen<span class="token punctuation">-</span>on<span class="token punctuation">-</span>v6 port 53 <span class="token punctuation">{</span> <span class="token punctuation">:</span><span class="token punctuation">:</span>1; <span class="token punctuation">}</span>;
        directory       &quot;/var/named&quot;;
        dump<span class="token punctuation">-</span>file       &quot;/var/named/data/cache_dump.db&quot;;
        statistics<span class="token punctuation">-</span>file &quot;/var/named/data/named_stats.txt&quot;;
        memstatistics<span class="token punctuation">-</span>file &quot;/var/named/data/named_mem_stats.txt&quot;;
        recursing<span class="token punctuation">-</span>file  &quot;/var/named/data/named.recursing&quot;;
        secroots<span class="token punctuation">-</span>file   &quot;/var/named/data/named.secroots&quot;;
        allow<span class="token punctuation">-</span>query     <span class="token punctuation">{</span> localhost; <span class="token punctuation">}</span>;

        /* 
         <span class="token punctuation">-</span> If you are building an AUTHORITATIVE DNS server<span class="token punctuation">,</span> do NOT enable recursion.
         <span class="token punctuation">-</span> If you are building a RECURSIVE (caching) DNS server<span class="token punctuation">,</span> you need to enable 
           recursion. 
         <span class="token punctuation">-</span> If your recursive DNS server has a public IP address<span class="token punctuation">,</span> you MUST enable access 
           control to limit queries to your legitimate users. Failing to do so will
           cause your server to become part of large scale DNS amplification 
           attacks. Implementing BCP38 within your network would greatly
           reduce such attack surface 
        <span class="token important">*/</span>
        recursion yes;

        dnssec<span class="token punctuation">-</span>enable yes;
        dnssec<span class="token punctuation">-</span>validation yes;

        /* Path to ISC DLV key <span class="token important">*/</span>
        bindkeys<span class="token punctuation">-</span>file &quot;/etc/named.root.key&quot;;

        managed<span class="token punctuation">-</span>keys<span class="token punctuation">-</span>directory &quot;/var/named/dynamic&quot;;

        pid<span class="token punctuation">-</span>file &quot;/run/named/named.pid&quot;;
        session<span class="token punctuation">-</span>keyfile &quot;/run/named/session.key&quot;;
<span class="token punctuation">}</span>;

logging <span class="token punctuation">{</span>
        channel default_debug <span class="token punctuation">{</span>
                file &quot;data/named.run&quot;;
                severity dynamic;
        <span class="token punctuation">}</span>;
<span class="token punctuation">}</span>;

zone &quot;.&quot; IN <span class="token punctuation">{</span>
        type hint;
        file &quot;named.ca&quot;;
<span class="token punctuation">}</span>;

include &quot;/etc/named.rfc1912.zones&quot;;
include &quot;/etc/named.root.key&quot;;

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>\u4FEE\u6539\u5185\u5BB9</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>listen<span class="token punctuation">-</span>on port 53 <span class="token punctuation">{</span> any; <span class="token punctuation">}</span>;
allow<span class="token punctuation">-</span>query     <span class="token punctuation">{</span> any; <span class="token punctuation">}</span>;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="\u6570\u636E\u5E93\u6863\u6848\u8BBE\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u5E93\u6863\u6848\u8BBE\u5B9A" aria-hidden="true">#</a> \u6570\u636E\u5E93\u6863\u6848\u8BBE\u5B9A</h3><ul><li>\u7F16\u8F91<code>named.rfc1912.zones</code>\u6587\u4EF6</li></ul><p>\u6DFB\u52A0\u5185\u5BB9</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>zone &quot;stage.com&quot; IN <span class="token punctuation">{</span>
       type master;
       file &quot;named.stage.com&quot;;
       allow<span class="token punctuation">-</span>update <span class="token punctuation">{</span> none; <span class="token punctuation">}</span>;
<span class="token punctuation">}</span>;

zone &quot;203.16.172.in<span class="token punctuation">-</span>addr.arpa&quot; IN <span class="token punctuation">{</span>
       type master;
       file &quot;named.172.16.203&quot;;
       allow<span class="token punctuation">-</span>update <span class="token punctuation">{</span> none; <span class="token punctuation">}</span>;
<span class="token punctuation">}</span>;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>\u521B\u5EFA <strong>named.stage.com</strong> \u6587\u4EF6</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">touch</span> /var/named/named.stage.com
<span class="token function">vim</span> /var/named/named.centos.vbird
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u6DFB\u52A0\u5982\u4E0B\u5185\u5BB9</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>$TTL  1H
@       IN SOA dns.stage.com. lionel.mail.stage.com.(2020112301 3H 15M 1W 1D)
@       IN NS   dns.stage.com.


dns.stage.com.    IN A      172.16.203.130
www.stage.com.    IN A    172.16.203.140
goods.stage.com.   IN A    172.16.203.140
cart.stage.com.   IN A   172.16.203.140
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>\u521B\u5EFA <strong>named.172.16.203</strong> \u6587\u4EF6</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /var/named/named.172.16.203
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u6DFB\u52A0\u5982\u4E0B\u5185\u5BB9</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>$TTL  600
@       IN SOA  dns.stage.com. lionel.mail.stage.com.(2020112301 3H 15M 1W 1D)
@       IN NS   dns.stage.com.

130    IN PTR    dns.stage.com.
140    IN PTR    www.stage.com.
140    IN PTR    goods.stage.com.
140    IN PTR    cart.stage.com.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="dns-\u7684\u542F\u52A8\u89C2\u5BDF\u4E0E\u9632\u706B\u5899" tabindex="-1"><a class="header-anchor" href="#dns-\u7684\u542F\u52A8\u89C2\u5BDF\u4E0E\u9632\u706B\u5899" aria-hidden="true">#</a> DNS \u7684\u542F\u52A8\u89C2\u5BDF\u4E0E\u9632\u706B\u5899</h3><ul><li>\u68C0\u67E5\u914D\u7F6E\u6587\u4EF6</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>named-checkzone enmonster.com named.enmonster.com
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>zone enmonster.com/IN: loaded serial 2022012301 OK</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>named-checkzone <span class="token number">203.168</span>.172.in-addr.arpa named.172.16.203
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>zone 203.168.172.in-addr.arpa/IN: loaded serial 2022012301 OK</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>named-checkconf /etc/named.conf
named-checkconf /etc/named.rfc1912.zones
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>\u542F\u52A8DNS</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start named.service
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>\u67E5\u770B\u65E5\u5FD7</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">tail</span> -n <span class="token number">30</span> /var/log/messages <span class="token operator">|</span> <span class="token function">grep</span> named
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>\u5F00\u653E53\u7AEF\u53E3 TCP/UDP</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">53</span>/tcp --permanent
firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">53</span>/udp --permanent
firewall-cmd --reload
firewall-cmd --zone<span class="token operator">=</span>public --list-ports
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>https://www.cnblogs.com/itwangqiang/p/13395138.html</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>24 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./NS/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>2d<span class="token punctuation">:</span><span class="token punctuation">:</span>d<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>24 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./NS/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>dc3<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">35</span><span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>24 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./NS/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>2f<span class="token punctuation">:</span><span class="token punctuation">:</span>f<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>24 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./NS/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>1<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">53</span><span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>24 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./NS/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>a8<span class="token punctuation">:</span><span class="token punctuation">:</span>e<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>24 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./NS/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>12<span class="token punctuation">:</span><span class="token punctuation">:</span>d0d<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>200<span class="token punctuation">:</span><span class="token punctuation">:</span>b<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>7fe<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">53</span><span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>503<span class="token punctuation">:</span>c27<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token datetime number">2:30</span><span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>503<span class="token punctuation">:</span>ba3e<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token datetime number">2:30</span><span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>2<span class="token punctuation">:</span><span class="token punctuation">:</span>c<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>9f<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">42</span><span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>7fd<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>2d<span class="token punctuation">:</span><span class="token punctuation">:</span>d<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>dc3<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">35</span><span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>2f<span class="token punctuation">:</span><span class="token punctuation">:</span>f<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>1<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">53</span><span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>a8<span class="token punctuation">:</span><span class="token punctuation">:</span>e<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>500<span class="token punctuation">:</span>12<span class="token punctuation">:</span><span class="token punctuation">:</span>d0d<span class="token comment">#53</span>
Mar  5 15<span class="token punctuation">:</span>45<span class="token punctuation">:</span>27 130 named<span class="token punctuation">[</span><span class="token number">2481</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">network unreachable resolving &#39;./DNSKEY/IN&#39;</span><span class="token punctuation">:</span> 2001<span class="token punctuation">:</span>7fd<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token comment">#53</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>\u6DFB\u52A0 OPTIONS=&quot;-4&quot; \u53C2\u6570\u5230/etc/sysconfig/named \u914D\u7F6E\u6587\u4EF6\u4E2D:</p><p>verify failed due to bad signature (keyid=9799): RRSIG validity period has not begun http://blog.sina.com.cn/s/blog_56ae1d580102y297.html \u89E3\u51B3\u65B9\u6CD5\u662F\u6821\u5BF9\u670D\u52A1\u5668\u65F6\u95F4\uFF0C\u4F7F\u7528date \u547D\u4EE4\u67E5\u770B\u53D1\u73B0\u670D\u52A1\u5668\u65F6\u95F4\u786E\u5B9E\u5F02\u5E38\u3001</p><p><code>managed-keys-zone: Key 20326 for zone . acceptance timer complete: key now trusted</code></p><p><code>managed-keys-zone: Unable to fetch DNSKEY set &#39;.&#39;: timed out</code> \u7531\u4E8E\u5185\u90E8DNS\u542F\u7528dnssec\uFF0C\u6240\u4EE5\u5185\u90E8DNS\u4F1A\u5411\u6839\u57DF\u540D(13\u4E2A\u6839\u8282\u70B9)\u83B7\u53D6DNSKEY\u4FE1\u606F\uFF1B\u51FA\u53BB\u5B89\u5168\u6027\u7684\u8003\u8651\u8FD9\u4E2ADNSKEY\u7684\u6709\u6548\u671F\u9650\u5F88\u77ED\uFF0C\u6240\u4EE5\u5185\u90E8DNS\u670D\u52A1\u5668\u9694\u4E00\u6BB5\u65F6\u95F4\u5C31\u8981\u53BB\u91CD\u65B0\u83B7\u53D6\u4E00\u6B21\u3002</p><h1 id="\u6CA1\u6709\u8BBE\u7F6Eforward-only" tabindex="-1"><a class="header-anchor" href="#\u6CA1\u6709\u8BBE\u7F6Eforward-only" aria-hidden="true">#</a> \u6CA1\u6709\u8BBE\u7F6Eforward-only</h1><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">[</span>root@130 named<span class="token punctuation">]</span><span class="token comment">#  systemctl status named.service</span>
\u25CF named.service <span class="token punctuation">-</span> Berkeley Internet Name Domain (DNS)
   <span class="token key atrule">Loaded</span><span class="token punctuation">:</span> <span class="token key atrule">loaded (/usr/lib/systemd/system/named.service; disabled; vendor preset</span><span class="token punctuation">:</span> disabled)
   <span class="token key atrule">Active</span><span class="token punctuation">:</span> active (running) since Sun 2022<span class="token punctuation">-</span>03<span class="token punctuation">-</span>06 22<span class="token punctuation">:</span>50<span class="token punctuation">:</span>01 CST; 19min ago
  <span class="token key atrule">Process</span><span class="token punctuation">:</span> 2923 ExecStop=/bin/sh <span class="token punctuation">-</span>c /usr/sbin/rndc stop <span class="token punctuation">&gt;</span> /dev/null 2<span class="token punctuation">&gt;</span><span class="token important">&amp;1</span> <span class="token punctuation">|</span><span class="token punctuation">|</span> /bin/kill <span class="token punctuation">-</span>TERM $MAINPID (code=exited<span class="token punctuation">,</span> status=0/SUCCESS)
  <span class="token key atrule">Process</span><span class="token punctuation">:</span> 1595 ExecReload=/bin/sh <span class="token punctuation">-</span>c /usr/sbin/rndc reload <span class="token punctuation">&gt;</span> /dev/null 2<span class="token punctuation">&gt;</span><span class="token important">&amp;1</span> <span class="token punctuation">|</span><span class="token punctuation">|</span> /bin/kill <span class="token punctuation">-</span>HUP $MAINPID (code=exited<span class="token punctuation">,</span> status=0/SUCCESS)
  <span class="token key atrule">Process</span><span class="token punctuation">:</span> 2935 ExecStart=/usr/sbin/named <span class="token punctuation">-</span>u named <span class="token punctuation">-</span>c $<span class="token punctuation">{</span>NAMEDCONF<span class="token punctuation">}</span> $OPTIONS (code=exited<span class="token punctuation">,</span> status=0/SUCCESS)
  <span class="token key atrule">Process</span><span class="token punctuation">:</span> 2933 ExecStartPre=/bin/bash <span class="token punctuation">-</span>c if <span class="token punctuation">[</span> <span class="token tag">!</span> &quot;$DISABLE_ZONE_CHECKING&quot; == &quot;yes&quot; <span class="token punctuation">]</span>; then /usr/sbin/named<span class="token punctuation">-</span>checkconf <span class="token punctuation">-</span>z &quot;$NAMEDCONF&quot;; else echo &quot;Checking of zone files is disabled&quot;; fi (code=exited<span class="token punctuation">,</span> status=0/SUCCESS)
 <span class="token key atrule">Main PID</span><span class="token punctuation">:</span> 2937 (named)
   <span class="token key atrule">CGroup</span><span class="token punctuation">:</span> /system.slice/named.service
           \u2514\u25002937 /usr/sbin/named <span class="token punctuation">-</span>u named <span class="token punctuation">-</span>c /etc/named.conf <span class="token punctuation">-</span><span class="token number">4</span>       
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.12.94.30<span class="token comment">#53</span>
Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.54.112.30<span class="token comment">#53</span>
Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.26.92.30<span class="token comment">#53</span>
Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.55.83.30<span class="token comment">#53</span>
Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.52.178.30<span class="token comment">#53</span>
Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.33.14.30<span class="token comment">#53</span>
Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.41.162.30<span class="token comment">#53</span>
Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.31.80.30<span class="token comment">#53</span>
Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.5.6.30<span class="token comment">#53</span>
Mar 06 23<span class="token punctuation">:</span>06<span class="token punctuation">:</span>49 130 named<span class="token punctuation">[</span><span class="token number">2937</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token key atrule">FORMERR resolving &#39;google.com/DS/IN&#39;</span><span class="token punctuation">:</span> 192.43.172.30<span class="token comment">#53</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>`,55);function p(t,c){return e}var l=s(a,[["render",p],["__file","company-intranet-dns.html.vue"]]);export{l as default};
